<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indie Rock Night - Evntly</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Simple transition for showing/hiding views */
        .view-hidden { display: none; }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header for Ticket Selection View -->
    <header id="main-header" class="bg-white border-b border-gray-200">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-8">
                    <div class="flex-shrink-0 font-bold text-xl">Evntly</div>
                </div>
                <div class="flex items-center">
                    <div class="flex items-baseline space-x-4">

                            <a href="./user-dashboard.html" class="px-3 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-gray-100">Home</a>
                            <a href="#" class="px-3 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-gray-100">Explore</a>
                            <a href="./view-ticket.html" class="px-3 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-gray-100">My Tickets</a>
                        </div>
                    <div class="mr-4">
                         <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                            </div>
                            <input type="text" placeholder="Search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                    </div>
                    <img class="h-8 w-8 rounded-full" src="https://placehold.co/40x40/EFEFEF/333333?text=A" alt="User Avatar">
                </div>
            </div>
        </nav>
    </header>

    <!-- Header for Payment View -->
    <header id="payment-header" class="bg-white border-b border-gray-200 view-hidden">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
             <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0 font-bold text-xl">Evntly</div>
                <div class="flex items-center space-x-6">
                    <a href="./user-dashboard.html" class="text-sm font-medium text-gray-900 hover:text-indigo-600">Home</a>
                    <button class="text-gray-500 hover:text-gray-900"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg></button>
                    <button class="text-gray-500 hover:text-gray-900"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg></button>
                </div>
            </div>
        </nav>
    </header>
    
    <!-- Header for Success and Ticket View -->
    <header id="final-header" class="bg-white border-b border-gray-200 view-hidden">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
             <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0 font-bold text-xl">Evntly</div>
                <div class="flex items-center space-x-6">
                    <a href="#" class="text-sm font-medium text-gray-900 hover:text-indigo-600">Home</a>
                    <a href="#" class="text-sm font-medium text-gray-900 hover:text-indigo-600">Profile</a>
                    <img class="h-8 w-8 rounded-full" src="https://placehold.co/40x40/EFEFEF/333333?text=A" alt="User Avatar">
                </div>
            </div>
        </nav>
    </header>

    <main class="max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
        <!-- View #1: Ticket Selection -->
        <div id="ticket-view">
            <div>
                <p class="text-sm font-medium text-gray-500">Music / Rock / Indie Rock</p>
                <h1 class="mt-2 text-4xl font-extrabold tracking-tight text-gray-900">Indie Rock Night</h1>
                <p class="mt-2 text-lg text-gray-500">Sat, Jul 20 - 7:00 PM Â· The Roxy Theatre, Los Angeles</p>
            </div>
            <div class="mt-8">
                <h2 class="text-xl font-bold text-gray-900">Select your seats</h2>
                <div class="mt-4 aspect-w-16 aspect-h-9 rounded-lg overflow-hidden bg-gray-100">
                    <img src="https://images.unsplash.com/photo-1552318965-6e6be7484ada?q=80&w=2070&auto=format&fit=crop" alt="Interior of a large, empty theatre with wooden walls and rows of seats." class="w-full h-full object-cover object-center">
                </div>
            </div>
            <div class="mt-12">
                <h2 class="text-xl font-bold text-gray-900">Tickets</h2>
                <div class="mt-4 border-t border-b border-gray-200 divide-y divide-gray-200">
                    <div class="py-6 flex justify-between items-center ticket-option" data-price="50" data-name="VIP"><h3 class="text-lg font-medium text-gray-900">VIP <span class="block text-sm text-gray-500 font-normal">$50</span></h3><div class="flex items-center space-x-4"><button class="quantity-btn minus-btn p-1 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-100 disabled:opacity-50" disabled>&ndash;</button><span class="font-medium text-lg quantity">0</span><button class="quantity-btn plus-btn p-1 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-100">+</button></div></div>
                    <div class="py-6 flex justify-between items-center ticket-option" data-price="75" data-name="Bottom Tier"><h3 class="text-lg font-medium text-gray-900">Bottom Tier <span class="block text-sm text-gray-500 font-normal">$75</span></h3><div class="flex items-center space-x-4"><button class="quantity-btn minus-btn p-1 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-100 disabled:opacity-50" disabled>&ndash;</button><span class="font-medium text-lg quantity">0</span><button class="quantity-btn plus-btn p-1 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-100">+</button></div></div>
                    <div class="py-6 flex justify-between items-center ticket-option" data-price="35" data-name="Middle Tier"><h3 class="text-lg font-medium text-gray-900">Middle Tier <span class="block text-sm text-gray-500 font-normal">$35</span></h3><div class="flex items-center space-x-4"><button class="quantity-btn minus-btn p-1 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-100 disabled:opacity-50" disabled>&ndash;</button><span class="font-medium text-lg quantity">0</span><button class="quantity-btn plus-btn p-1 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-100">+</button></div></div>
                </div>
            </div>
            <div class="mt-8 text-right">
                <button class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition disabled:bg-gray-400" id="continue-btn" disabled>Continue</button>
            </div>
        </div>

        <!-- View #2: Payment Options -->
        <div id="payment-view" class="view-hidden max-w-2xl mx-auto">
            <button id="back-to-tickets-btn" class="mb-6 text-sm font-medium text-indigo-600 hover:text-indigo-800">&larr; Back to tickets</button>
            <div class="text-center">
                <h1 class="text-3xl font-extrabold text-gray-900">Payment Options</h1>
                <p class="mt-2 text-md text-gray-600">Choose your preferred payment method to complete your purchase.</p>
            </div>
            <form id="payment-form" class="mt-10 space-y-8">
                <div><h2 class="text-lg font-semibold text-gray-800">Credit/Debit Card</h2><div class="mt-4 p-4 border rounded-lg bg-white"><div class="mb-4"><label for="card-number" class="sr-only">Card Number</label><input type="text" id="card-number" placeholder="Card Number" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div class="flex space-x-4"><input type="text" placeholder="Expiry Date (MM/YY)" class="w-1/2 p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"><input type="text" placeholder="CVV" class="w-1/2 p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></div></div></div>
                <div><h2 class="text-lg font-semibold text-gray-800">UPI</h2><div class="mt-4"><input type="text" placeholder="UPI ID" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"></div></div>
                <div><h2 class="text-lg font-semibold text-gray-800">Net Banking</h2><div class="mt-4"><select class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"><option disabled selected>Select Bank</option><option>State Bank of India</option><option>HDFC Bank</option><option>ICICI Bank</option><option>Axis Bank</option></select></div></div>
                <div><h2 class="text-lg font-semibold text-gray-800">Wallets</h2><div class="mt-4"><select class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"><option disabled selected>Select Wallet</option><option>Paytm</option><option>Google Pay</option><option>PhonePe</option></select></div></div>
                <div class="pt-4"><button type="submit" class="w-full bg-blue-600 text-white font-bold py-4 px-8 rounded-lg hover:bg-blue-700 transition">Pay Now</button></div>
            </form>
        </div>

        <!-- View #3: Payment Successful -->
        <div id="success-view" class="view-hidden max-w-3xl mx-auto">
            <div class="text-center">
                <h1 class="text-3xl font-extrabold text-gray-900">Payment Successful!</h1>
                <p class="mt-2 text-md text-gray-600">Your order has been successfully processed. Thank you for your purchase!</p>
            </div>
            <div class="mt-10 bg-white shadow-sm border border-gray-200 rounded-lg p-8 space-y-8">
                <div>
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Order Summary</h2>
                    <div class="space-y-4">
                        <div class="flex justify-between border-b pb-4"><div><p class="text-sm text-gray-500">Event</p><p class="font-medium text-gray-900">Indie Rock Night</p></div><div><p class="text-sm text-gray-500">Date</p><p class="font-medium text-gray-900">Saturday, July 20, 2024</p></div></div>
                        <div class="flex justify-between border-b pb-4"><div><p class="text-sm text-gray-500">Time</p><p class="font-medium text-gray-900">8:00 PM</p></div><div><p class="text-sm text-gray-500">Venue</p><p class="font-medium text-gray-900">The Roxy Theatre</p></div></div>
                        <div class="flex justify-between"><div><p class="text-sm text-gray-500">Tickets</p><p id="summary-tickets" class="font-medium text-gray-900"></p></div><div><p class="text-sm text-gray-500">Total</p><p id="summary-total" class="font-medium text-gray-900"></p></div></div>
                    </div>
                </div>
                <div>
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Payment Details</h2>
                    <div class="space-y-4">
                        <div class="flex justify-between border-b pb-4"><div><p class="text-sm text-gray-500">Payment Method</p><p class="font-medium text-gray-900">Credit Card</p></div><div><p class="text-sm text-gray-500">Amount Paid</p><p id="summary-amount-paid" class="font-medium text-gray-900"></p></div></div>
                        <div class="flex justify-between"><div><p class="text-sm text-gray-500">Confirmation Number</p><p class="font-medium text-gray-900">1234567890</p></div></div>
                    </div>
                </div>
            </div>
            <div class="mt-8 flex justify-center space-x-4">
                <button id="view-tickets-btn" class="bg-blue-100 text-blue-800 font-bold py-3 px-8 rounded-lg hover:bg-blue-200 transition">View Tickets</button>
                <button class="bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-lg hover:bg-gray-300 transition">Download Tickets</button>
            </div>
        </div>
        
        <!-- View #4: Your Ticket -->
        <div id="ticket-details-view" class="view-hidden max-w-2xl mx-auto">
            <button id="back-to-summary-btn" class="mb-6 text-sm font-medium text-indigo-600 hover:text-indigo-800">&larr; Back to Order Summary</button>
            <h1 class="text-3xl font-extrabold text-gray-900">Your Ticket</h1>
            <div class="mt-6 bg-white shadow-sm border border-gray-200 rounded-lg p-8">
                <div class="flex flex-col md:flex-row gap-8">
                    <img src="https://images.unsplash.com/photo-1524368535928-5b5e00ddc76b?q=80&w=2070&auto=format&fit=crop" alt="Band playing on stage" class="w-full md:w-1/3 h-40 object-cover rounded-lg">
                    <div class="flex-1">
                        <h2 class="text-2xl font-bold text-gray-900">Indie Rock Night</h2>
                        <p class="mt-1 text-md text-gray-600">Fri, Jul 12 - 8:00 PM Â· The Underground</p>
                    </div>
                </div>
                <div class="mt-8 pt-8 border-t border-gray-200 space-y-6">
                    <h3 class="text-xl font-semibold text-gray-800">Ticket Details</h3>
                    <div class="grid grid-cols-2 gap-x-4 gap-y-6">
                        <div><p class="text-sm text-gray-500">Ticket Type</p><p id="ticket-type" class="font-medium text-gray-900">General Admission</p></div>
                        <div><p class="text-sm text-gray-500">Price</p><p id="ticket-price" class="font-medium text-gray-900">$25</p></div>
                        <div><p class="text-sm text-gray-500">Seat</p><p class="font-medium text-gray-900">A1-12</p></div>
                        <div><p class="text-sm text-gray-500">Ticket Holder</p><p class="font-medium text-gray-900">Sophia Carter</p></div>
                    </div>
                </div>
                <div class="mt-8 pt-8 border-t border-gray-200">
                     <h3 class="text-xl font-semibold text-gray-800 mb-4">QR Code</h3>
                     <div class="p-6 bg-orange-100 rounded-lg flex justify-center">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://example.com/ticket/12345" alt="Ticket QR Code" class="rounded-md">
                     </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Views
            const ticketView = document.getElementById('ticket-view');
            const paymentView = document.getElementById('payment-view');
            const successView = document.getElementById('success-view');
            const ticketDetailsView = document.getElementById('ticket-details-view');
            // Headers
            const mainHeader = document.getElementById('main-header');
            const paymentHeader = document.getElementById('payment-header');
            const finalHeader = document.getElementById('final-header');
            // Buttons
            const continueBtn = document.getElementById('continue-btn');
            const backToTicketsBtn = document.getElementById('back-to-tickets-btn');
            const paymentForm = document.getElementById('payment-form');
            const viewTicketsBtn = document.getElementById('view-tickets-btn');
            const backToSummaryBtn = document.getElementById('back-to-summary-btn');
            // Other elements
            const ticketOptions = document.querySelectorAll('.ticket-option');
            const summary = {
                tickets: document.getElementById('summary-tickets'),
                total: document.getElementById('summary-total'),
                amountPaid: document.getElementById('summary-amount-paid'),
            };
            const ticketDetails = {
                type: document.getElementById('ticket-type'),
                price: document.getElementById('ticket-price')
            };

            let totalTickets = 0;
            let totalPrice = 0;
            let ticketSummaryString = "";

            // --- TICKET SELECTION LOGIC ---
            function updateTotal() {
                totalTickets = 0;
                totalPrice = 0;
                let summaryParts = [];

                ticketOptions.forEach(option => {
                    const quantity = parseInt(option.querySelector('.quantity').textContent);
                    if (quantity > 0) {
                        const price = parseInt(option.dataset.price);
                        const name = option.dataset.name;
                        totalTickets += quantity;
                        totalPrice += quantity * price;
                        summaryParts.push(`${quantity} x ${name}`);
                    }
                });
                ticketSummaryString = summaryParts.join(', ');
                continueBtn.disabled = totalTickets === 0;
            }

            ticketOptions.forEach(option => {
                const minusBtn = option.querySelector('.minus-btn');
                const plusBtn = option.querySelector('.plus-btn');
                const quantitySpan = option.querySelector('.quantity');
                plusBtn.addEventListener('click', () => { let q = parseInt(quantitySpan.textContent); quantitySpan.textContent = ++q; minusBtn.disabled = false; updateTotal(); });
                minusBtn.addEventListener('click', () => { let q = parseInt(quantitySpan.textContent); if (q > 0) { quantitySpan.textContent = --q; } if (q === 0) { minusBtn.disabled = true; } updateTotal(); });
            });

            // --- VIEW SWITCHING LOGIC ---
            function showView(viewToShow, headerToShow) {
                [ticketView, paymentView, successView, ticketDetailsView, mainHeader, paymentHeader, finalHeader].forEach(el => el.classList.add('view-hidden'));
                viewToShow.classList.remove('view-hidden');
                headerToShow.classList.remove('view-hidden');
                window.scrollTo(0, 0);
            }

            function showPaymentView() { showView(paymentView, paymentHeader); }
            function showTicketView() { showView(ticketView, mainHeader); }
            
            function showSuccessView(event) {
                event.preventDefault(); // Prevent actual form submission
                summary.tickets.textContent = ticketSummaryString || 'N/A';
                summary.total.textContent = `$${totalPrice.toFixed(2)}`;
                summary.amountPaid.textContent = `$${totalPrice.toFixed(2)}`;
                showView(successView, finalHeader);
            }

            function showTicketDetailsView() {
                // For this example, we'll just show the details for the first ticket type purchased.
                let firstTicket = null;
                 for(const option of ticketOptions) {
                    if (parseInt(option.querySelector('.quantity').textContent) > 0) {
                        firstTicket = option;
                        break;
                    }
                }
                if (firstTicket) {
                    ticketDetails.type.textContent = firstTicket.dataset.name;
                    ticketDetails.price.textContent = `$${parseInt(firstTicket.dataset.price).toFixed(2)}`;
                }
                showView(ticketDetailsView, finalHeader);
            }

            // --- EVENT LISTENERS ---
            continueBtn.addEventListener('click', showPaymentView);
            backToTicketsBtn.addEventListener('click', showTicketView);
            paymentForm.addEventListener('submit', showSuccessView);
            viewTicketsBtn.addEventListener('click', showTicketDetailsView);
            backToSummaryBtn.addEventListener('click', (e) => showView(successView, finalHeader));
        });
    </script>
</body>
</html>
